<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie API Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
            line-height: 1.7;
            background-color: #f6f6f6;
            color: #222;
        }

        h1 {
            color: #111;
            text-align: center;
            margin-bottom: 32px;
            letter-spacing: 1px;
        }

        .intro {
            background-color: #ededed;
            padding: 20px 28px;
            border-radius: 8px;
            margin-bottom: 32px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
            background-color: #fafafa;
            border-radius: 8px;
            overflow: hidden;
        }

        th,
        td {
            border: 1px solid #d3d3d3;
            padding: 12px 14px;
            text-align: left;
            vertical-align: top;
        }

        th {
            background-color: #e5e5e5;
            color: #111;
            font-weight: bold;
            text-align: center;
            letter-spacing: 0.5px;
        }

        .method {
            font-weight: bold;
            text-align: center;
            padding: 7px 0;
            border-radius: 4px;
            min-width: 60px;
            color: #fff;
        }
        .method.get {
            background-color: #b7d7b0;
        }
        .method.post {
            background-color: #b3c7e6;
        }
        .method.put {
            background-color: #ffe0b2;
        }
        .method.delete {
            background-color: #e6b3b3;
        }

        .url {
            font-family: 'Courier New', monospace;
            background-color: #f0f0f0;
            padding: 8px 10px;
            border-radius: 4px;
            font-weight: bold;
            color: #222;
        }

        .code-block {
            font-family: 'Courier New', monospace;
            background-color: #f0f0f0;
            padding: 8px 10px;
            border-radius: 4px;
            font-size: 0.95em;
            line-height: 1.5;
            border-left: 3px solid #bbb;
            color: #222;
        }

        .response-block {
            font-family: 'Courier New', monospace;
            background-color: #f0f0f0;
            padding: 8px 10px;
            border-radius: 4px;
            font-size: 0.95em;
            line-height: 1.5;
            border-left: 3px solid #bbb;
            color: #222;
        }

        .description {
            font-size: 1em;
            max-width: 320px;
        }

        .notes {
            background-color: #ededed;
            padding: 20px;
            border-radius: 8px;
            margin-top: 32px;
        }

        .param-note {
            color: #666;
            font-style: italic;
            font-size: 0.92em;
        }
    </style>
</head>

<body>

    <h1>Movie API Documentation</h1>

    <div class="intro">
        <h2>Authentication</h2>
        <p>
            <strong>All endpoints require authentication via JWT.</strong><br>
            You must include an <code>Authorization: Bearer &lt;JWT_TOKEN&gt;</code> header in your requests.<br>
            Obtain a token by logging in via the <code>/login</code> endpoint.
        </p>
    </div>

    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Method</th>
                <th>Endpoint URL</th>
                <th>Query Parameters</th>
                <th>Request Body</th>
                <th>Response Format</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="description">Authenticate user and return a JWT token for use in subsequent requests</td>
                <td class="method post">POST</td>
                <td class="url">/login</td>
                <td class="param-note">None</td>
                <td class="code-block">JSON Object (required):<br>
                    {<br>
                    &nbsp;&nbsp;"username": "cinephile01",<br>
                    &nbsp;&nbsp;"password": "password123"<br>
                    }
                </td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"user": { ...user object, no password... },<br>
                    &nbsp;&nbsp;"token": "&lt;JWT_TOKEN&gt;"<br>
                    }<br><br>
                    Status: 200 OK<br><br>
                    Error Response:<br>
                    { "message": "Something is not right", "user": null } (Status: 400)
                </td>
            </tr>
            <tr>
                <td class="description">Returns a complete list of all movies from MongoDB database</td>
                <td class="method get">GET</td>
                <td class="url">/movies</td>
                <td class="param-note">None</td>
                <td class="code-block">None</td>
                <td class="response-block">JSON Array:<br>
                    [<br>
                    &nbsp;&nbsp;{<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"_id": "68dab3357250d28a9cce5f47",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"title": "No Other Land",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"year": 2024,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"description": "Shows the destruction...",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"genre": {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name": "Documentary",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"description": "Non-fiction films..."<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"director": {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name": "Basel Adra",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"bio": "Palestinian journalist...",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"birthYear": null,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"deathYear": null<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"featured": true,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"imageURL": "https://upload.wikimedia.org/..."<br>
                    &nbsp;&nbsp;}<br>
                    ]</td>
            </tr>
            <tr>
                <td class="description">Returns detailed information about a specific movie by exact title match</td>
                <td class="method get">GET</td>
                <td class="url">/movies/[title]</td>
                <td class="param-note">title (URL parameter)<br>Example: /movies/Tár</td>
                <td class="code-block">None</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"_id": "68dab3357250d28a9cce5f48",<br>
                    &nbsp;&nbsp;"title": "Tár",<br>
                    &nbsp;&nbsp;"year": 2022,<br>
                    &nbsp;&nbsp;"description": "A celebrated music director's life...",<br>
                    &nbsp;&nbsp;"genre": {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"name": "Drama",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"description": "Serious, character-driven..."<br>
                    &nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;"director": {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"name": "Todd Field",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"bio": "American filmmaker...",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"birthYear": 1964,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;"deathYear": null<br>
                    &nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;"featured": true,<br>
                    &nbsp;&nbsp;"imageURL": "https://upload.wikimedia.org/..."<br>
                    }</td>
            </tr>
            <tr>
                <td class="description">Returns genre information by finding the first movie with that genre</td>
                <td class="method get">GET</td>
                <td class="url">/genres/[name]</td>
                <td class="param-note">name (URL parameter)<br>Example: /genres/Fantasy</td>
                <td class="code-block">None</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"name": "Fantasy",<br>
                    &nbsp;&nbsp;"description": "Stories incorporating magical, supernatural, or dreamlike elements."<br>
                    }</td>
            </tr>
            <tr>
                <td class="description">Returns director information by finding the first movie with that director</td>
                <td class="method get">GET</td>
                <td class="url">/directors/[name]</td>
                <td class="param-note">name (URL parameter)<br>Example: /directors/Apichatpong%20Weerasethakul</td>
                <td class="code-block">None</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"name": "Apichatpong Weerasethakul",<br>
                    &nbsp;&nbsp;"bio": "Thai independent film director, screenwriter, and producer.",<br>
                    &nbsp;&nbsp;"birthYear": 1970,<br>
                    &nbsp;&nbsp;"deathYear": null<br>
                    }</td>
            </tr>
            <tr>
                <td class="description">Creates a new user account with username validation (must be unique)</td>
                <td class="method post">POST</td>
                <td class="url">/users</td>
                <td class="param-note">None</td>
                <td class="code-block">JSON Object (required):<br>
                    {<br>
                    &nbsp;&nbsp;"username": "cinephile01",<br>
                    &nbsp;&nbsp;"email": "cinephile01@example.com",<br>
                    &nbsp;&nbsp;"password": "password123",<br>
                    &nbsp;&nbsp;"birthday": "1990-05-12"<br>
                    }</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"_id": "68dab3827250d28a9cce5f51",<br>
                    &nbsp;&nbsp;"username": "cinephile01",<br>
                    &nbsp;&nbsp;"email": "cinephile01@example.com",<br>
                    &nbsp;&nbsp;"birthday": "1990-05-12T00:00:00.000Z",<br>
                    &nbsp;&nbsp;"favoriteMovies": [],<br>
                    &nbsp;&nbsp;"__v": 0<br>
                    }<br>
                    <span class="param-note">Note: The password is never returned in the response.</span><br><br>
                    Status: 201 Created<br><br>
                    Error Response:<br>
                    "username already exists" (Status: 400)
                </td>
            </tr>
            <tr>
                <td class="description">Updates user information (only provided fields are updated)</td>
                <td class="method put">PUT</td>
                <td class="url">/users/[username]</td>
                <td class="param-note">username (URL parameter)<br>Example: /users/cinephile01</td>
                <td class="code-block">JSON Object (optional fields):<br>
                    {<br>
                    &nbsp;&nbsp;"username": "newusername",<br>
                    &nbsp;&nbsp;"email": "newemail@example.com",<br>
                    &nbsp;&nbsp;"password": "newpassword",<br>
                    &nbsp;&nbsp;"birthday": "1990-05-12"<br>
                    }</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"_id": "68dab3827250d28a9cce5f51",<br>
                    &nbsp;&nbsp;"username": "newusername",<br>
                    &nbsp;&nbsp;"email": "newemail@example.com",<br>
                    &nbsp;&nbsp;"password": "newpassword",<br>
                    &nbsp;&nbsp;"birthday": "1990-05-12T00:00:00.000Z",<br>
                    &nbsp;&nbsp;"favoriteMovies": ["68dab3357250d28a9cce5f47"],<br>
                    &nbsp;&nbsp;"__v": 0<br>
                    }<br><br>
                    Status: 200 OK<br><br>
                    Error Response:<br>
                    "User not found" (Status: 404)</td>
            </tr>
            <tr>
                <td class="description">Adds a movie ObjectId to user's favoriteMovies array </td>
                <td class="method put">PUT</td>
                <td class="url">/users/[username]/movies/[movieId]</td>
                <td class="param-note">username (URL parameter)<br>movieId (MongoDB ObjectId)<br>Example: /users/cinephile01/movies/68dab3357250d28a9cce5f47</td>
                <td class="code-block">None</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"message": "Movie has been added to cinephile01's favorites",<br>
                    &nbsp;&nbsp;"user": { ...updated user object... }<br>
                    }<br><br>
                    Status: 200 OK<br><br>
                    Error Response:<br>
                    { "error": "User not found" } (Status: 404)
                </td>
            </tr>
            <tr>
                <td class="description">Removes a movie ObjectId from user's favoriteMovies array </td>
                <td class="method delete">DELETE</td>
                <td class="url">/users/[username]/movies/[movieId]</td>
                <td class="param-note">username (URL parameter)<br>movieId (MongoDB ObjectId)<br>Example: /users/cinephile01/movies/68dab3357250d28a9cce5f47</td>
                <td class="code-block">None</td>
                <td class="response-block">JSON Object:<br>
                    {<br>
                    &nbsp;&nbsp;"message": "Movie has been removed from cinephile01's favorites",<br>
                    &nbsp;&nbsp;"user": { ...updated user object... }<br>
                    }<br><br>
                    Status: 200 OK<br><br>
                    Error Response:<br>
                    { "error": "User not found" } (Status: 404)
                </td>
            </tr>
            <tr>
                <td class="description">Completely removes a user document from the database</td>
                <td class="method delete">DELETE</td>
                <td class="url">/users/[username]</td>
                <td class="param-note">username (URL parameter)<br>Example: /users/cinephile01</td>
                <td class="code-block">None</td>
                <td class="response-block">Plain Text:<br>
                    "cinephile01 was deleted."<br><br>
                    Status: 200 OK<br><br>
                    Error Response:<br>
                    "cinephile01 was not found" (Status: 404)</td>
            </tr>
        </tbody>
    </table>
</body>

</html>